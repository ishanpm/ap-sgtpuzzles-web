<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Archipelago.js Client Example</title>
    </head>
    <body>
        <script type="module">
            import {
                Client,
                ITEMS_HANDLING_FLAGS,
                SERVER_PACKET_TYPE,
            } from "https://unpkg.com/archipelago.js/dist/archipelago.min.js";

            // Create a new Archipelago client
            const client = new Client();

            const connectionInfo = {
                hostname: "localhost", // Replace with the actual AP server hostname.
                port: 38281, // Replace with the actual AP server port.
                game: "your-game-name", // Replace with the game name for this player.
                name: "your-player-name", // Replace with the player slot name.
                items_handling: ITEMS_HANDLING_FLAGS.REMOTE_ALL,
            };

            // Set up event listeners
            client.addListener(SERVER_PACKET_TYPE.CONNECTED, (packet) => {
                console.log("Connected to server: ", packet);
            });

            client.addListener(SERVER_PACKET_TYPE.ROOM_UPDATE, (packet) => {
                console.log("Room update: ", packet);
            });

            // Connect to the Archipelago server
            client
                .connect(connectionInfo)
                .then(() => {
                    console.log("Connected to the server");
                    // You are now connected and authenticated to the server. You can add more code here if need be.
                })
                .catch((error) => {
                    console.error("Failed to connect:", error);
                    // Handle the connection error.
                });

            // Disconnect from the server when unloading window.
            window.addEventListener("beforeunload", () => {
                client.disconnect();
            });
        </script>
    </body>
</html>